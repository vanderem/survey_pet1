<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vida Pet — Questionário</title>
    <style>
        :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; }
        body { margin: 0; background: #f6f7fb; }
        .container { max-width: 820px; margin: 40px auto; padding: 24px; background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.06); }
        h1 { margin-top: 0; font-size: 1.8rem; }
        .field { margin: 24px 0; }
        .field:first-of-type { margin-top: 0; }
        label { display: block; font-weight: 600; margin-bottom: 10px; }
        input[type="text"], input[type="email"], input[type="number"], select, textarea {
          width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 10px; box-sizing: border-box;
        }
        .hint { font-size: .9rem; color: #6b7280; margin-top: 6px; line-height: 1.4; }
        textarea { min-height: 120px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .grid4 { display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 16px; }
        .checkboxes, .radios { display: flex; flex-direction: column; gap: 12px; }
        .checkboxes label, .radios label { display: flex; align-items: center; gap: 10px; margin: 0; font-weight: 500; }
        .checkboxes input, .radios input { margin: 0; }
        .actions { margin-top: 32px; display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
        button { padding: 12px 20px; border: 0; border-radius: 10px; cursor: pointer; font-weight: 600; transition: transform .15s ease, box-shadow .15s ease; }
        button:focus-visible { outline: 2px solid #4338ca; outline-offset: 2px; }
        button:active { transform: translateY(1px); }
        .primary { background: #111827; color: #fff; }
        .ghost { background: #eef2ff; color: #111827; }
        .note { font-size: .95rem; color: #6b7280; line-height: 1.6; }
        .required { color: #ef4444; }
        pre { background: #0b1020; color: #c9e5ff; padding: 14px; border-radius: 12px; overflow: auto; font-size: .95rem; }
        .progress { margin: 24px 0 32px; }
        .progress-track { height: 10px; background: #e5e7eb; border-radius: 999px; overflow: hidden; }
        .progress-bar { height: 100%; width: 0; background: linear-gradient(90deg, #4338ca, #6366f1); transition: width .3s ease; }
        .progress-text { margin-top: 10px; font-size: .95rem; color: #4b5563; font-weight: 600; }
        .field.hidden { display: none; }
        #submitBtn { display: none; }
        @media (max-width: 640px) {
              .container { margin: 20px auto; padding: 20px; border-radius: 12px; }
              .grid4 { grid-template-columns: 1fr; }
              .row { grid-template-columns: 1fr; }
        }

        /* Escala 1–5 com radios inline */
        .scale-legend { display: flex; justify-content: space-between; font-size: .9rem; color: #6b7280; margin-bottom: 6px; }

        .radios-inline { display: grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap: 10px; }

        /* Estrutura pill para permitir estado :checked bem estilizado */
        .radios-inline label.pill { position: relative; display: block; cursor: pointer; }
        .radios-inline label.pill input { position: absolute; inset: 0; width: 0; height: 0; opacity: 0; }

        .radios-inline label.pill span {
            display: block; text-align: center; padding: 10px 0;
            border: 1px solid #e5e7eb; border-radius: 10px; font-weight: 600; user-select: none;
        }

        .radios-inline label.pill input:checked + span {
            background: linear-gradient(90deg, #4338ca, #6366f1);
            color: #fff; border-color: transparent;
        }

        .radios-inline label.pill input:focus-visible + span {
            outline: 2px solid #4338ca; outline-offset: 2px;
        }

        /* Ranking drag-and-drop */
        .rank-list { display: grid; gap: 10px; margin-top: 10px; }
        .rank-item { display: grid; grid-template-columns: 32px 1fr auto; align-items: center; gap: 12px; padding: 10px 12px; border: 1px solid #e5e7eb; border-radius: 12px; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,.04); }
        .rank-item .handle { font-size: 18px; color: #6b7280; cursor: grab; user-select: none; }
        .rank-item .title { font-weight: 600; color: #111827; }
        .rank-item .badge { min-width: 34px; height: 28px; display: grid; place-items: center; border-radius: 999px; background: #eef2ff; color: #4338ca; font-weight: 700; }
        .rank-item.dragging { opacity: .6; background: #f9fafb; }
        .rank-item.placeholder { border: 2px dashed #c7d2fe; background: #eef2ff55; }

      </style>
</head>
<body>
+<div class="container">
      <h1>Vida Pet — Questionário</h1>
      <p class="note">Teste de Layout. Ao clicar em <strong>Gerar preview</strong>, exibimos o JSON das respostas abaixo.</p>

      <div class="progress" aria-live="polite">
        <div class="progress-track" role="presentation">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="progress-text" id="progressText">Pergunta 1 de 16</div>
      </div>

      <form id="formulario" novalidate>
        <!-- 1. Espécie (múltipla escolha) -->
        <div class="field question" data-step="0">
          <label>Qual espécie de pet você possui? <span class="required">*</span></label>
          <div class="checkboxes">
            <label><input type="checkbox" name="especie" value="Cão" required> Cão</label>
            <label><input type="checkbox" name="especie" value="Gato"> Gato</label>
            <label><input type="checkbox" name="especie" value="Outro"> Outro</label>
          </div>
          <input type="text" id="especie_outro" name="especie_outro" placeholder="Se marcou Outro, especifique" style="margin-top:8px; display:none;" />
        </div>

        <!-- 2. Quantos pets -->
        <div class="field question hidden" data-step="1">
          <label>Quantos pets você possui? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="qtd_pets" value="1" required> 1</label>
            <label><input type="radio" name="qtd_pets" value="2"> 2</label>
            <label><input type="radio" name="qtd_pets" value="3"> 3</label>
            <label><input type="radio" name="qtd_pets" value="4 ou mais"> 4 ou mais</label>
          </div>
        </div>

        <!-- 3. Gestão de cuidado -->
        <div class="field question hidden" data-step="2">
          <label>Como você costuma gerenciar as informações de cuidado do seu pet? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="gestao_cuidado" value="Caderneta/Pasta de papel" required> Caderneta/Pasta de papel</label>
            <label><input type="radio" name="gestao_cuidado" value="Planilha ou bloco de notas digital"> Planilha ou bloco de notas digital</label>
            <label><input type="radio" name="gestao_cuidado" value="Aplicativo específico para pets"> Aplicativo específico para pets</label>
            <label><input type="radio" name="gestao_cuidado" value="Lembro de cabeça/Confio no meu veterinário"> Lembro de cabeça/Confio no meu veterinário</label>
            <label><input type="radio" name="gestao_cuidado" value="Outro"> Outro</label>
          </div>
          <input type="text" id="gestao_cuidado_outro" name="gestao_cuidado_outro" placeholder="Se marcou Outro, especifique" style="margin-top:8px; display:none;" />
        </div>

       <!-- 4. Uso de apps gerais/pet -->
        <div class="field question hidden" data-step="3">
          <label>No seu dia a dia, você já utiliza algum aplicativo para gerenciar cuidado? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="usa_app_geral" value="Sim, regularmente para mim e para o meu pet" required> Sim, regularmente para mim e para o meu pet</label>
            <label><input type="radio" name="usa_app_geral" value="Regularmente, sim, para mim, mas não para o meu pet"> Regularmente, sim, para mim, mas não para o meu pet</label>
            <label><input type="radio" name="usa_app_geral" value="Eu já usei, mas hoje não mais e nem para o meu pet"> Eu já usei, mas hoje não mais e nem para o meu pet</label>
            <label><input type="radio" name="usa_app_geral" value="Nunca usei"> Nunca usei</label>
            <label><input type="radio" name="usa_app_geral" value="Outro"> Outro</label>
          </div>
          <input type="text" id="usa_app_geral_outro" name="usa_app_geral_outro" placeholder="Se marcou Outro, especifique" style="margin-top:8px; display:none;" />
        </div>

        <!-- 5. Ranking de desafios (1 = mais prioritário) -->
        <div class="field question hidden" data-step="4">
          <label>Qual destes desafios é o prioritário na gestão do seu pet? (1 = mais prioritário, 4 = menos) <span class="required">*</span></label>

          <div class="hint">Arraste para ordenar (topo = 1, baixo = 4). Vamos salvar a posição como 1, 2, 3, 4.</div>

          <div class="rank-list" id="rankList">
            <div class="rank-item" draggable="true" data-name="rank_saude">
              <span class="handle" aria-hidden="true">↕</span>
              <div class="title">Esquecer horários de medicação/reforços (Saúde)</div>
              <div class="badge"><span class="rank-pos">1</span></div>
              <input type="hidden" name="rank_saude" value="1" required>
            </div>
            <div class="rank-item" draggable="true" data-name="rank_documentos">
              <span class="handle" aria-hidden="true">↕</span>
              <div class="title">Perder documentos ou não tê-los em mãos</div>
              <div class="badge"><span class="rank-pos">2</span></div>
              <input type="hidden" name="rank_documentos" value="2" required>
            </div>
            <div class="rank-item" draggable="true" data-name="rank_dieta">
              <span class="handle" aria-hidden="true">↕</span>
              <div class="title">Dificuldade em controlar a dieta e o peso</div>
              <div class="badge"><span class="rank-pos">3</span></div>
              <input type="hidden" name="rank_dieta" value="3" required>
            </div>
            <div class="rank-item" draggable="true" data-name="rank_seguranca">
              <span class="handle" aria-hidden="true">↕</span>
              <div class="title">Falta de segurança sobre paradeiro/bem-estar</div>
              <div class="badge"><span class="rank-pos">4</span></div>
              <input type="hidden" name="rank_seguranca" value="4" required>
            </div>
          </div>

          <div class="hint">(Opcional) Se mudar de ideia, basta arrastar novamente.</div>
        </div>

        <!-- 6. Escala 1–5: Prontuário (radios inline) -->
        <div class="field question hidden" data-step="5">
              <label>De 1 a 5, quão importante é ter um Prontuário Veterinário Digital centralizado? <span class="required">*</span></label>
              <div class="scale-legend"><span>Nada importante</span><span>Extremamente importante</span></div>
              <div class="radios-inline">
                  <label class="pill"><input type="radio" name="prontuario_importancia" value="1" required><span>1</span></label>
                  <label class="pill"><input type="radio" name="prontuario_importancia" value="2"><span>2</span></label>
                  <label class="pill"><input type="radio" name="prontuario_importancia" value="3"><span>3</span></label>
                  <label class="pill"><input type="radio" name="prontuario_importancia" value="4"><span>4</span></label>
                  <label class="pill"><input type="radio" name="prontuario_importancia" value="5"><span>5</span></label>
              </div>
        </div>

        <!-- 7. Escala 1–5: Lembrete (radios inline) -->
        <div class="field question hidden" data-step="6">
              <label>De 1 a 5, quão útil seria um lembrete automático (notificação) para saúde? <span class="required">*</span></label>
              <div class="scale-legend"><span>Nada útil</span><span>Extremamente útil</span></div>
              <div class="radios-inline">
                  <label class="pill"><input type="radio" name="lembrete_utilidade" value="1" required><span>1</span></label>
                  <label class="pill"><input type="radio" name="lembrete_utilidade" value="2"><span>2</span></label>
                  <label class="pill"><input type="radio" name="lembrete_utilidade" value="3"><span>3</span></label>
                  <label class="pill"><input type="radio" name="lembrete_utilidade" value="4"><span>4</span></label>
                  <label class="pill"><input type="radio" name="lembrete_utilidade" value="5"><span>5</span></label>
              </div>
        </div>

        <!-- 8. Upload de docs (intenção) -->
        <div class="field question hidden" data-step="7">
          <label>Você faria upload de documentos importantes/legais do seu pet em um aplicativo seguro? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="upload_docs" value="Sim, com certeza" required> Sim, com certeza</label>
            <label><input type="radio" name="upload_docs" value="Talvez, se o app me parecer confiável"> Talvez, se o app me parecer confiável</label>
            <label><input type="radio" name="upload_docs" value="Não, prefiro pasta física/nuvem pessoal"> Não, prefiro pasta física/nuvem pessoal</label>
          </div>
        </div>

        <!-- 9. Aberta: tarefa mais trabalhosa -->
        <div class="field question hidden" data-step="8">
          <label>Hoje, o que é mais trabalhoso ou que demanda mais tempo no cuidado do pet? <span class="required">*</span></label>
          <textarea name="tarefa_mais_trabalhosa" required placeholder="Escreva aqui…"></textarea>
        </div>

        <!-- 10. Ajuda com nutrição -->
        <div class="field question hidden" data-step="9">
          <label>Um auxílio com a nutrição do seu pet é importante? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="ajuda_nutricao" value="Sim, é muito importante" required> Sim, é muito importante</label>
            <label><input type="radio" name="ajuda_nutricao" value="Talvez, mas não é prioridade"> Talvez, mas não é prioridade</label>
            <label><input type="radio" name="ajuda_nutricao" value="Não, já sei como alimentar meu pet"> Não, já sei como alimentar meu pet</label>
          </div>
        </div>

        <!-- 11. Coleira GPS -->
        <div class="field question hidden" data-step="10">
         <label>Se o app oferecesse Coleira Inteligente com GPS (Localização e Atividade), você usaria? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="coleira_gps" value="Sim, a segurança é importante" required> Sim, a segurança é importante</label>
            <label><input type="radio" name="coleira_gps" value="Talvez, dependendo do preço"> Talvez, dependendo do preço</label>
            <label><input type="radio" name="coleira_gps" value="Não, não me interesso"> Não, não me interesso</label>
          </div>
        </div>

        <!-- 12. Carteira de Identidade do Pet -->
        <div class="field question hidden" data-step="11">
          <label>A funcionalidade gratuita de Carteira de Identidade do Pet influenciaria sua adoção do app? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="carteira_id_pet" value="Sim" required> Sim</label>
            <label><input type="radio" name="carteira_id_pet" value="Não sei"> Não sei</label>
            <label><input type="radio" name="carteira_id_pet" value="Não tem relevância"> Não tem relevância</label>
          </div>
        </div>

        <!-- 13. Aberta: única característica decisiva -->
        <div class="field question hidden" data-step="12">
          <label>Se pudesse escolher somente uma característica que te faria usar o aplicativo, qual seria? <span class="required">*</span></label>
          <textarea name="unica_caracteristica" required placeholder="Escreva aqui…"></textarea>
        </div>

       <!-- 14. Assinatura paga -->
        <div class="field question hidden" data-step="13">
          <label>Se o básico fosse gratuito, você pagaria assinatura mensal para mais recursos? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="pagaria_assinatura" value="Sim, pagaria" required> Sim, pagaria</label>
            <label><input type="radio" name="pagaria_assinatura" value="Não"> Não</label>
            <label><input type="radio" name="pagaria_assinatura" value="Talvez"> Talvez</label>
          </div>
        </div>

        <!-- 15. Valor máximo mensal -->
        <div class="field question hidden" data-step="14">
          <label>Qual seria o valor máximo mensal (R$) que pagaria? <span class="required">*</span></label>
          <div class="radios">
            <label><input type="radio" name="valor_assinatura" value="R$ 5,00 a R$ 9,90" required> R$ 5,00 a R$ 9,90</label>
            <label><input type="radio" name="valor_assinatura" value="R$ 10,00 a R$ 14,99"> R$ 10,00 a R$ 14,99</label>
            <label><input type="radio" name="valor_assinatura" value="R$ 15,00 a R$ 19,90"> R$ 15,00 a R$ 19,90</label>
            <label><input type="radio" name="valor_assinatura" value="R$ 20,00 ou mais"> R$ 20,00 ou mais</label>
            <label><input type="radio" name="valor_assinatura" value="Outro"> Outro</label>
          </div>
          <input type="text" id="valor_assinatura_outro" name="valor_assinatura_outro" placeholder="Se marcou Outro, especifique" style="margin-top:8px; display:none;" />
        </div>

        <!-- 16. Aberta: motivo de abandono -->
        <div class="field question hidden" data-step="15">
          <label>E para encerrar: o que faria você deixar de usar o app? <span class="required">*</span></label>
          <textarea name="motivo_abandono" required placeholder="Escreva aqui…"></textarea>
        </div>

        <div class="actions">
          <button type="button" class="ghost" id="prevBtn">Anterior</button>
          <button type="button" class="primary" id="nextBtn">Próxima</button>
          <button class="primary" type="submit" id="submitBtn">Gerar preview</button>
          <button class="ghost" type="reset">Limpar</button>
        </div>

        <div class="field" id="previewField">
          <label>Preview (JSON das respostas)</label>
          <pre id="preview">{}</pre>
        </div>
      </form>
    </div>

<script>
      const form = document.getElementById('formulario');
      const preview = document.getElementById('preview');
      const fields = Array.from(form.querySelectorAll('.field.question'));
      const totalSteps = fields.length;
      const progressBar = document.getElementById('progressBar');
      const progressText = document.getElementById('progressText');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const submitBtn = document.getElementById('submitBtn');

          let currentStep = 0;

          function updateProgress() {
                const percent = ((currentStep + 1) / totalSteps) * 100;
                progressBar.style.width = `${percent}%`;
                progressText.textContent = `Pergunta ${currentStep + 1} de ${totalSteps}`;
              }

      function showStep(index) {
            fields.forEach((field, i) => {
                  if (i === index) {
                        field.classList.remove('hidden');
                      } else {
                        field.classList.add('hidden');
                      }
                });

                prevBtn.style.display = index === 0 ? 'none' : 'inline-flex';
            nextBtn.style.display = index === totalSteps - 1 ? 'none' : 'inline-flex';
            submitBtn.style.display = index === totalSteps - 1 ? 'inline-flex' : 'none';

                updateProgress();
          }

      function validateStep(index, report = true) {
            const field = fields[index];
            if (!field) return true;
            let valid = true;

                const groups = {};
            field.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                  if (!groups[input.name]) {
                        groups[input.name] = { inputs: [], required: false };
                      }
                  groups[input.name].inputs.push(input);
                  if (input.required) groups[input.name].required = true;
                  input.setCustomValidity('');
                });

                for (const name in groups) {
                  const group = groups[name];
                  if (!group.required) continue;
                  const checked = group.inputs.some(input => input.checked);
                  if (!checked) {
                        valid = false;
                        if (report) {
                              group.inputs[0].setCustomValidity('Selecione uma opção.');
                              group.inputs[0].reportValidity();
                            }
                        break;
                      }
                }

                if (!valid) return false;

                const controls = field.querySelectorAll('input:not([type="radio"]):not([type="checkbox"]), select, textarea');
            for (const control of controls) {
                  control.setCustomValidity('');
                  if (control.required && control.value.trim() === '') {
                        if (report) {
                              control.setCustomValidity('Preencha este campo.');
                              control.reportValidity();
                            }
                        valid = false;
                        break;
                      }
                  if (valid && !control.checkValidity()) {
                        if (report) control.reportValidity();
                        valid = false;
                        break;
                      }
                }

                return valid;
          }

      function goToStep(newIndex) {
            if (newIndex < 0 || newIndex >= totalSteps) return;
            currentStep = newIndex;
            showStep(currentStep);
          }

      nextBtn.addEventListener('click', () => {
            if (!validateStep(currentStep, true)) return;
            goToStep(currentStep + 1);
          });

          prevBtn.addEventListener('click', () => {
                goToStep(currentStep - 1);
              });

          function toggleOutro(name, inputId) {
                const checkedOutro = Array.from(document.querySelectorAll(`[name="${name}"]`)).some(el => el.checked && el.value === 'Outro');
                const input = document.getElementById(inputId);
                if (!input) return;
                input.style.display = checkedOutro ? 'block' : 'none';
                if (!checkedOutro) {
                      input.value = '';
                      input.setCustomValidity('');
                    }
              }

          // Atualiza visualização do valor dos sliders (1–5)
          document.querySelectorAll('input[type="range"][data-show-value]').forEach(range => {
              const output = range.parentElement.querySelector('output');
              const update = () => { output.value = range.value; };
              range.addEventListener('input', update);
              update(); // inicial
          });

      // Ranking (drag-and-drop) — atualiza inputs hidden com posições 1..N
      (function initRankList(){
        const list = document.getElementById('rankList');
        if (!list) return;

        let draggingEl = null;

        const updateRanks = () => {
          Array.from(list.children).forEach((item, idx) => {
            const pos = idx + 1;
            const badge = item.querySelector('.rank-pos');
            const input = item.querySelector('input[type="hidden"]');
            if (badge) badge.textContent = String(pos);
            if (input) input.value = String(pos);
          });
        };

        const getDragAfterElement = (container, y) => {
          const els = [...container.querySelectorAll('.rank-item:not(.dragging)')];
          return els.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
              return { offset, element: child };
            } else {
              return closest;
            }
          }, { offset: Number.NEGATIVE_INFINITY }).element;
        };

        list.addEventListener('dragstart', (e) => {
          const target = e.target.closest('.rank-item');
          if (!target) return;
          draggingEl = target;
          target.classList.add('dragging');
        });

        list.addEventListener('dragend', (e) => {
          const target = e.target.closest('.rank-item');
          if (target) target.classList.remove('dragging');
          draggingEl = null;
          updateRanks();
        });

        list.addEventListener('dragover', (e) => {
          e.preventDefault();
          const afterElement = getDragAfterElement(list, e.clientY);
          const dragging = list.querySelector('.dragging');
          if (!dragging) return;
          if (afterElement == null) {
            list.appendChild(dragging);
          } else {
            list.insertBefore(dragging, afterElement);
          }
        });

        updateRanks();
      })();

      ['gestao_cuidado', 'usa_app_geral', 'valor_assinatura'].forEach(n => {
            document.querySelectorAll(`[name="${n}"]`).forEach(el => el.addEventListener('change', () => toggleOutro(n, `${n}_outro`)));
          });

          const especieOutroInput = document.getElementById('especie_outro');
      document.querySelectorAll('[name="especie"]').forEach(el => el.addEventListener('change', () => {
            const marcouOutro = Array.from(document.querySelectorAll('[name="especie"]')).some(x => x.checked && x.value === 'Outro');
            especieOutroInput.style.display = marcouOutro ? 'block' : 'none';
            if (!marcouOutro) especieOutroInput.value = '';
          }));

          form.addEventListener('submit', (e) => {
                e.preventDefault();
                if (!validateStep(currentStep, true)) return;

                    const fd = new FormData(form);
                const data = {};
                for (const [key, value] of fd.entries()) {
                      if (key in data) {
                            if (Array.isArray(data[key])) {
                                  data[key].push(value);
                                } else {
                                  data[key] = [data[key], value];
                                }
                          } else {
                            data[key] = value;
                          }
                    }
                Object.keys(data).forEach(k => {
                      if (Array.isArray(data[k])) data[k] = data[k].join('; ');
                    });

                    preview.textContent = JSON.stringify(data, null, 2);
              });

          form.addEventListener('reset', () => {
                setTimeout(() => {
                      currentStep = 0;
                      fields.forEach(field => field.classList.add('hidden'));
                      fields[0].classList.remove('hidden');
                      ['especie_outro','gestao_cuidado_outro','usa_app_geral_outro','valor_assinatura_outro'].forEach(id => {
                            const input = document.getElementById(id);
                            if (input) {
                                  input.style.display = 'none';
                                  input.value = '';
                                }
                          });
                      preview.textContent = '{}';
                      showStep(0);
                    }, 0);
              });

          showStep(0);
    </script>
</body>
</html>